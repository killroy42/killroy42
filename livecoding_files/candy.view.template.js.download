/** File: template.js
 * Candy - Chats are not dead yet.
 *
 * Authors:
 *   - Patrick Stadler <patrick.stadler@gmail.com>
 *   - Michael Weibel <michael.weibel@gmail.com>
 *
 * Copyright:
 *   (c) 2011 Amiado Group AG. All rights reserved.
 *   (c) 2012-2014 Patrick Stadler & Michael Weibel. All rights reserved.
 */
'use strict';

/* global Candy */

/** Class: Candy.View.Template
 * Contains mustache.js templates
 */
Candy.View.Template = (function(self){
	self.Window = {
		/**
		 * Unread messages - used to extend the window title
		 */
		unreadmessages: '({{count}}) {{title}}'
	};

	self.Chat = {
		pane: '<div id="chat-pane"><div class="chat-heading"><div>Chat</div></div>{{> tabs}}{{> toolbar}}{{> rooms}}</div>{{> modal}}',
		rooms: '<div id="chat-rooms" class="rooms"></div>',
		tabs: '',
		tab: '<li class="roomtype-{{roomType}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}">' +
				'<a href="#" class="label">{{#privateUserChat}}@{{/privateUserChat}}{{name}}</a>' +
				'<a href="#" class="transition"></a><a href="#" class="close">\u00D7</a>' +
				'<small class="unread"></small></li>',
		modal: '<div id="chat-modal"><a id="admin-message-cancel" class="close" href="#">\u00D7</a>' +
				'<span id="chat-modal-body"></span>' +
				'<img src="{{assetsPath}}img/modal-spinner.gif" id="chat-modal-spinner" />' +
				'</div>',
		adminMessage: '<li class="message message-admin">' +
				'<span class="label">{{sender}}</span>' +
				'{{message}}</li>',
		infoMessage: '<li class="message message-info">{{subject}} {{message}}</li>',
		toolbar:
        '<a id="pastebin-icon" href="https://www.livecoding.tv/pastebin" target="_blank" title="Pastebin">Pastebin</a>' +
				'<div id="emoticons-icon" title="{{tooltipEmoticons}}"></div>' +
				'<ul id="chat-toolbar">' +
        '<li id="chat-theme-switch" title="Change color scheme"></li>' +
				'<li id="chat-sound-control" class="checked" title="{{tooltipSound}}">{{> soundcontrol}}</li>' +
        '<li class="usercount" title="{{tooltipUsercount}}">' +
        '<span id="chat-usercount"></span></li></ul>',
		soundcontrol: '<script type="text/javascript">var audioplayerListener = new Object();' +
						' audioplayerListener.onInit = function() { };' +
						'</script><object id="chat-sound-player" type="application/x-shockwave-flash" data="{{assetsPath}}audioplayer.swf"' +
						' width="0" height="0"><param name="movie" value="{{assetsPath}}audioplayer.swf" /><param name="AllowScriptAccess"' +
						' value="always" /><param name="FlashVars" value="listener=audioplayerListener&amp;mp3={{assetsPath}}notify.mp3" />' +
						'</object>',
		Context: {
			menu: '<div id="context-menu"><i class="arrow arrow-top"></i>' +
				'<ul></ul><i class="arrow arrow-bottom"></i></div>',
			menulinks: '<li class="{{class}}" id="context-menu-{{id}}">{{label}}</li>',
			contextModalForm: '<form action="#" id="context-modal-form">' +
							'<label for="context-modal-label">{{_label}}</label>' +
							'<input type="text" name="contextModalField" id="context-modal-field" />' +
							'<input type="submit" class="button" name="send" value="{{_submit}}" /></form>',
			adminMessageReason: '<a id="admin-message-cancel" class="close" href="#">Ã—</a>' +
							'<p>{{_action}}</p>{{#reason}}<p>{{_reason}}</p>{{/reason}}'
		},
		tooltip: '<div id="tooltip"><i class="arrow arrow-top"></i>' +
					'<div></div><i class="arrow arrow-bottom"></i></div>'
	};

	self.Room = {
		pane: '<div class="room-pane roomtype-{{roomType}}" id="chat-room-{{roomId}}" data-roomjid="{{roomJid}}" data-roomtype="{{roomType}}">' +
			'{{> roster}}{{> messages}}{{> form}}</div>',
		subject: '<li class="message message-subject">' +
				'<span class="label">{{roomName}}</span>' +
				'{{_roomSubject}} {{{subject}}}</li>',
		form: '<div class="message-form-wrapper">' +
				'<form method="post" class="message-form">' +
				'<div class="message-textarea"><textarea id="message-textarea" name="message" placeholder="your message or /code type code here" class="field" type="text" aria-label="Message Form Text Field" autocomplete="off" maxlength="1000"></textarea></div>' +
				'<input type="checkbox" id="sendonenter" checked="checked" class="css-checkbox"/><label checked="checked" class="css-label" for="sendonenter">send on enter</label><input type="submit" class="submit" name="submit" value="{{_messageSubmit}}" /></form></div>'
	};

	self.Roster = {
		pane: '<div class="roster-pane"></div>',
		user: '<div class="user clearfix role-{{role}} affiliation-{{affiliation}}{{#me}} me{{/me}}"' +
				' id="user-{{roomId}}-{{userId}}" data-jid="{{userJid}}"' +
				' data-nick="{{nick}}" data-role="{{role}}" data-affiliation="{{affiliation}}">' +
				'<div class="label">{{displayNick}}</div><ul>' +
				'<li class="context" id="context-{{roomId}}-{{userId}}">&#x25BE;</li>' +
				'<li class="role role-{{role}} affiliation-{{affiliation}}"></li>' +
				'<li class="ignore" title="{{tooltipIgnored}}"></li></ul></div>'
	};

	self.Message = {
		pane: '<div class="message-pane-wrapper prevent-page-scroll"><ul class="message-pane"></ul></div>',
		item: '<li class="message{{#extraMsgClasses}} {{extraMsgClasses}}{{/extraMsgClasses}}">' +
				'<a href="{{userLink}}" target="_blank" class="nickname {{#role}} role-{{role}}{{/role}}{{#affiliation}}' +
                ' affiliation-{{affiliation}}{{/affiliation}}"{{#userColor}} style="color: {{userColor}};"{{/userColor}}>' +
                '<small class="timestamp">{{time}}</small>' +
                '{{displayName}}</a>{{{message}}}</li>'
	};

	self.Login = {
		form: '<form method="post" id="login-form" class="login-form">' +
			'{{#displayNickname}}<label for="username">{{_labelNickname}}</label><input type="text" id="username" name="username"/>{{/displayNickname}}' +
			'{{#displayUsername}}<label for="username">{{_labelUsername}}</label>' +
			'<input type="text" id="username" name="username"/>{{/displayUsername}}' +
			'{{#presetJid}}<input type="hidden" id="username" name="username" value="{{presetJid}}"/>{{/presetJid}}' +
			'{{#displayPassword}}<label for="password">{{_labelPassword}}</label>' +
			'<input type="password" id="password" name="password" />{{/displayPassword}}' +
			'<input type="submit" class="button" value="{{_loginSubmit}}" /></form>'
	};

	self.PresenceError = {
		enterPasswordForm: '<strong>{{_label}}</strong>' +
			'<form method="post" id="enter-password-form" class="enter-password-form">' +
			'<label for="password">{{_labelPassword}}</label><input type="password" id="password" name="password" />' +
			'<input type="submit" class="button" value="{{_joinSubmit}}" /></form>',
		nicknameConflictForm: '<strong>{{_label}}</strong>' +
			'<form method="post" id="nickname-conflict-form" class="nickname-conflict-form">' +
			'<label for="nickname">{{_labelNickname}}</label><input type="text" id="nickname" name="nickname" />' +
			'<input type="submit" class="button" value="{{_loginSubmit}}" /></form>',
		displayError: '<strong>{{_error}}</strong>'
	};

	return self;
}(Candy.View.Template || {}));
